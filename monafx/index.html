<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MONAFX</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
:root{
--bg:#0a0a0f;
--surface:#12121a;
--surface-soft:#151520;
--glass:rgba(255,255,255,.05);
--purple:#8b5cf6;
--purple-soft:rgba(139,92,246,.25);
--text:#f5f5f7;
--muted:#9ca3af;
--radius:18px;
--ease:cubic-bezier(.4,0,.2,1);
}

*{margin:0;padding:0;box-sizing:border-box}

body{
font-family:'Inter',sans-serif;
background:
radial-gradient(circle at 15% 20%, rgba(139,92,246,.15), transparent 40%),
radial-gradient(circle at 85% 80%, rgba(139,92,246,.12), transparent 40%),
#0a0a0f;
color:var(--text);
overflow-x:hidden;
scroll-behavior:smooth;
}

.reveal{opacity:0;transform:translateY(40px);transition:.8s var(--ease)}
.reveal.active{opacity:1;transform:translateY(0)}

.lazy-img{opacity:0;transform:scale(1.05);transition:1s var(--ease)}
.lazy-img.loaded{opacity:1;transform:scale(1)}

section{padding:120px 8vw}
a{text-decoration:none;color:inherit}
img{width:100%;height:100%;object-fit:cover}
h2{font-size:38px;margin-bottom:60px;text-align:center;font-weight:600;letter-spacing:.5px}

.nav{
position:fixed;top:0;left:0;width:100%;
display:flex;align-items:center;justify-content:space-between;
padding:22px 6vw;z-index:999;
transition:.35s var(--ease);
}
.nav.scrolled{background:rgba(15,15,22,.75);backdrop-filter:blur(18px)}
.brand{font-size:20px;font-weight:400;cursor:default;user-select:none}
.brand span{font-weight:800;color:var(--purple)}

.nav-links{display:flex;gap:40px;font-size:14px}
.nav-links a{position:relative;transition:.25s var(--ease)}
.nav-links a::after{
content:'';position:absolute;bottom:-4px;left:0;
width:0;height:1px;background:var(--purple);
transition:.25s var(--ease);
}
.nav-links a:hover::after{width:100%}

.socials{display:flex;gap:18px}
.socials a{
width:36px;height:36px;border-radius:50%;
display:flex;align-items:center;justify-content:center;
background:var(--surface);font-size:11px;font-weight:700;
transition:.3s var(--ease);
}
.socials a:hover{transform:scale(1.1);box-shadow:0 0 20px var(--purple-soft)}

.hero{
height:100vh;
display:flex;align-items:center;justify-content:center;
text-align:center;flex-direction:column;
}
.hero h1{font-size:68px;font-weight:400}
.hero h1 span{font-weight:800;color:var(--purple)}
.hero p{margin-top:20px;color:var(--muted);letter-spacing:1px;font-size:15px}

.contact-icons{display:flex;justify-content:center;gap:40px}
.contact-icons a{
width:60px;height:60px;border-radius:50%;
background:var(--surface);
display:flex;align-items:center;justify-content:center;
transition:.3s var(--ease);
}
.contact-icons a:hover{transform:scale(1.1);box-shadow:0 0 25px var(--purple-soft)}

.clients-grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(80px,1fr));
gap:40px;align-items:center;justify-items:center;
}
.clients-grid a{
width:72px;height:72px;border-radius:50%;
overflow:hidden;display:block;
filter:grayscale(1);opacity:.75;
transition:.3s var(--ease);
}
.clients-grid a:hover{
filter:none;opacity:1;
transform:scale(1.1);
box-shadow:0 0 20px var(--purple-soft);
}
.clients-grid a img{width:100%;height:100%;object-fit:cover;display:block}

.pricing-grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
gap:40px;
}
.price-card{
background:linear-gradient(145deg,#161622,#111119);
padding:50px 40px;border-radius:var(--radius);
border:1px solid rgba(139,92,246,.1);
transition:.3s var(--ease);
}
.price-card:hover{
transform:translateY(-6px);
box-shadow:0 0 40px var(--purple-soft);
border-color:rgba(139,92,246,.3);
}
.price-card h3{margin-bottom:20px;font-weight:500;font-size:15px;color:var(--muted)}
.price-card .price{font-size:28px;font-weight:700;margin-bottom:14px;color:var(--purple)}
.price-card p{color:var(--muted);font-size:14px;line-height:1.6}

.work-grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(340px,1fr));
gap:30px;
}
.work-item{
position:relative;aspect-ratio:16/9;
border-radius:var(--radius);overflow:hidden;
background:var(--surface);
transition:.25s var(--ease);
}
.work-item:hover{transform:translateY(-6px);box-shadow:0 0 30px var(--purple-soft)}
.work-item img{width:100%;height:100%;object-fit:cover;display:block}
.work-item iframe{width:100%;height:100%;border:none;display:block}

.review-box{
max-width:800px;margin:0 auto;
background:var(--surface);
padding:40px;border-radius:var(--radius);
}
.review-item{
margin-bottom:24px;padding-bottom:24px;
border-bottom:1px solid rgba(255,255,255,.06);
}
.review-item:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}
.review-item strong{font-size:14px;font-weight:600;color:var(--purple)}
.review-item p{margin-top:6px;color:var(--muted);font-size:14px;line-height:1.6}
.review-reply{
margin-top:10px;padding:10px 14px;
background:var(--surface-soft);
border-left:2px solid var(--purple);
border-radius:6px;font-size:13px;color:var(--muted);
}
.review-form{margin-top:40px;display:flex;flex-direction:column;gap:14px}
.review-form input,
.review-form textarea{
background:#1a1a25;
border:1px solid rgba(255,255,255,.06);
padding:14px;border-radius:10px;
color:white;font-family:inherit;font-size:14px;
outline:none;transition:.25s var(--ease);
}
.review-form input:focus,
.review-form textarea:focus{border-color:rgba(139,92,246,.4)}
.review-form textarea{resize:vertical;min-height:100px}
.review-form button{
background:var(--purple);border:none;
padding:14px;border-radius:10px;
cursor:pointer;color:white;
font-family:inherit;font-weight:600;font-size:14px;
transition:.25s var(--ease);
}
.review-form button:hover{opacity:.85;transform:translateY(-1px)}

.modal-overlay{
display:none;position:fixed;inset:0;
background:rgba(0,0,0,.8);backdrop-filter:blur(8px);
z-index:9999;align-items:center;justify-content:center;
}
.modal-overlay.active{display:flex}
.modal-box{
background:var(--surface);padding:40px;
border-radius:var(--radius);width:360px;
display:flex;flex-direction:column;gap:14px;
}
.modal-box h3{font-size:16px;font-weight:600;margin-bottom:4px}
.modal-box input{
background:#1a1a25;border:1px solid rgba(255,255,255,.06);
padding:12px;border-radius:8px;
color:white;font-family:inherit;outline:none;
}
.modal-box .btn-primary{
background:var(--purple);border:none;
padding:12px;border-radius:8px;
cursor:pointer;color:white;
font-family:inherit;font-weight:600;
transition:.25s var(--ease);
}
.modal-box .btn-primary:hover{opacity:.85}
.modal-close{
background:transparent;border:none;
color:var(--muted);cursor:pointer;
font-family:inherit;font-size:13px;padding:0;
}

.admin-entry{
padding:16px;background:#1a1a25;
border-radius:10px;margin-bottom:12px;
}
.admin-entry strong{color:var(--purple);font-size:13px}
.admin-entry p{color:var(--muted);font-size:13px;margin-top:4px}
.admin-entry .abtns{margin-top:10px;display:flex;gap:8px}
.admin-entry .abtns button{
padding:6px 12px;border:none;border-radius:6px;
cursor:pointer;font-size:12px;font-family:inherit;
transition:.2s var(--ease);
}
.btn-del{background:#3d1a1a;color:#f87171}
.btn-del:hover{background:#5a2020}
.btn-rep{background:#1a2a3d;color:#93c5fd}
.btn-rep:hover{background:#1e3550}
</style>
</head>
<body>

<div class="nav" id="nav">
  <div class="brand" ondblclick="openAdminLogin()">Mona<span>FX</span></div>

  <div class="nav-links">
    <a href="#contact">Contact</a>
    <a href="#clients">Clients</a>
    <a href="#pricing">Pricing</a>
    <a href="#work">Work</a>
    <a href="#reviews">Reviews</a>
  </div>

  <div class="socials">
    <!-- PASTE X LINK HERE -->
    <a href="PASTE_X_LINK_HERE" target="_blank">X</a>
    <!-- PASTE DISCORD LINK HERE -->
    <a href="PASTE_DISCORD_LINK_HERE" target="_blank">D</a>
  </div>
</div>

<section class="hero">
  <h1 class="reveal">Mona<span>FX</span></h1>
  <p class="reveal">Cinematic Fortnite Editing</p>
</section>

<!-- ========== CONTACT ========== -->
<section id="contact" class="reveal">
  <h2>Contact</h2>
  <div class="contact-icons">
    <!-- PASTE X LINK HERE -->
    <a href="PASTE_X_LINK_HERE" target="_blank" title="X / Twitter">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.744l7.737-8.835L1.254 2.25H8.08l4.258 5.63 5.905-5.63zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
    </a>
    <!-- PASTE DISCORD LINK HERE -->
    <a href="PASTE_DISCORD_LINK_HERE" target="_blank" title="Discord">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057c.001.022.015.04.033.055a19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>
    </a>
  </div>
</section>

<!-- ========== CLIENTS ========== -->
<section id="clients" class="reveal">
  <h2>Clients</h2>
  <div class="clients-grid">
    <a href="https://x.com/Asafnr" target="_blank"><img src="asapfp.jpg" alt="Asa"></a>
    <a href="https://x.com/F1N4IK22" target="_blank"><img src="f1npfp.jpg" alt="F1N4IK"></a>
    <a href="https://x.com/Rezyfnxx" target="_blank"><img src="rezypfp.jpg" alt="Rezy"></a>
    <a href="https://x.com/kantrifnn" target="_blank"><img src="kantripfp.jpg" alt="Kantri"></a>
    <a href="https://x.com/DeyyFN" target="_blank"><img src="deyypfp.jpg" alt="Deyy"></a>
    <a href="https://x.com/NeFrizi" target="_blank"><img src="nefrizipfp.jpg" alt="NeFrizi"></a>
    <a href="https://x.com/Flokito_" target="_blank"><img src="flokpfp.jpg" alt="Flokito"></a>
    <a href="https://x.com/dandepuzo" target="_blank"><img src="dandepfp.jpg" alt="dandepuzo"></a>
    <a href="https://x.com/Rad3on2" target="_blank"><img src="radpfp.jpg" alt="Rad3on"></a>
    <a href="https://x.com/skrillgaard" target="_blank"><img src="skrillpfp.jpg" alt="Skrillgaard"></a>
    <a href="https://x.com/slepzi300" target="_blank"><img src="slepzipfp.jpg" alt="Slepzi"></a>
    <a href="https://x.com/BirkFNBR" target="_blank"><img src="birkpfp.jpg" alt="Birk"></a>
    <a href="https://x.com/Mald1sFNBR" target="_blank"><img src="malpfp.jpg" alt="Maldis"></a>
    <a href="https://x.com/Evolvedfnx" target="_blank"><img src="evopfp.jpg" alt="Evolved"></a>
    <a href="https://x.com/Aimreddd" target="_blank"><img src="aimpfp.jpg" alt="Aimred"></a>
    <a href="https://x.com/FinnFn_" target="_blank"><img src="finnpfp.jpg" alt="Finn"></a>
    <a href="https://x.com/auvahalo" target="_blank"><img src="auvapfp.jpg" alt="Auvahalo"></a>
    <a href="https://x.com/noia_gg" target="_blank"><img src="noiapfp.jpg" alt="Noia"></a>
    <a href="https://x.com/ghonzofn" target="_blank"><img src="ghonpfp.jpg" alt="Ghonzo"></a>
    <a href="https://x.com/RashFNBR" target="_blank"><img src="rashpfp.jpg" alt="Rash"></a>
  </div>
</section>

<!-- ========== PRICING ========== -->
<section id="pricing" class="reveal">
  <h2>Pricing</h2>
  <div class="pricing-grid">
    <div class="price-card">
      <h3>Indie Style Montage</h3>
      <div class="price">€4+</div>
      <p>Cinematic montage edit with smooth pacing and stylized transitions.</p>
    </div>
    <div class="price-card">
      <h3>Placement Videos</h3>
      <div class="price">€5</div>
      <p>Competitive placement edits built for performance and flow.</p>
    </div>
    <div class="price-card">
      <h3>Placement Thumbnails</h3>
      <div class="price">€4</div>
      <p>Clean high-CTR thumbnails aligned with your branding.</p>
    </div>
  </div>
</section>

<!-- ========== WORK ========== -->
<section id="work" class="reveal">
  <h2>Work</h2>
  <div class="work-grid">

    <!-- YouTube embeds -->
    <div class="work-item"><iframe src="https://www.youtube.com/embed/kCfPVdiTXnM" allowfullscreen></iframe></div>
    <div class="work-item"><iframe src="https://www.youtube.com/embed/iLdlxgMiwtE" allowfullscreen></iframe></div>
    <div class="work-item"><iframe src="https://www.youtube.com/embed/ajiupp6c8wM" allowfullscreen></iframe></div>
    <div class="work-item"><iframe src="https://www.youtube.com/embed/AoCgs2YMpNI" allowfullscreen></iframe></div>
    <div class="work-item"><iframe src="https://www.youtube.com/embed/J7EAMrN9Ic4" allowfullscreen></iframe></div>
    <div class="work-item"><iframe src="https://www.youtube.com/embed/tG6wsbYjy64" allowfullscreen></iframe></div>
    <div class="work-item"><iframe src="https://www.youtube.com/embed/a55XJ6jCzbg" allowfullscreen></iframe></div>
    <div class="work-item"><iframe src="https://www.youtube.com/embed/AHfiOkXJ-Is" allowfullscreen></iframe></div>
    <div class="work-item"><iframe src="https://www.youtube.com/embed/8E3qowctMnw" allowfullscreen></iframe></div>

    <!-- Image thumbnails — monawork1.jpg through monawork15.jpg, drop in root folder -->
    <div class="work-item"><img src="monawork1.jpg" alt=""></div>
    <div class="work-item"><img src="monawork2.jpg" alt=""></div>
    <!--<div class="work-item"><img src="monawork3.jpg" alt=""></div>
    <div class="work-item"><img src="monawork4.jpg" alt=""></div>
    <div class="work-item"><img src="monawork5.jpg" alt=""></div>
    <div class="work-item"><img src="monawork6.jpg" alt=""></div>
    <div class="work-item"><img src="monawork7.jpg" alt=""></div>
    <div class="work-item"><img src="monawork8.jpg" alt=""></div>
    <div class="work-item"><img src="monawork9.jpg" alt=""></div>
    <div class="work-item"><img src="monawork10.jpg" alt=""></div>
    <div class="work-item"><img src="monawork11.jpg" alt=""></div>
    <div class="work-item"><img src="monawork12.jpg" alt=""></div>
    <div class="work-item"><img src="monawork13.jpg" alt=""></div>
    <div class="work-item"><img src="monawork14.jpg" alt=""></div>
    <div class="work-item"><img src="monawork15.jpg" alt=""></div>

    Extra slots — uncomment as needed, follow same naming pattern -->
    <!--
    <div class="work-item"><img src="monawork16.jpg" alt=""></div>
    <div class="work-item"><img src="monawork17.jpg" alt=""></div>
    <div class="work-item"><img src="monawork18.jpg" alt=""></div>
    <div class="work-item"><img src="monawork19.jpg" alt=""></div>
    <div class="work-item"><img src="monawork20.jpg" alt=""></div>
    <div class="work-item"><img src="monawork21.jpg" alt=""></div>
    <div class="work-item"><img src="monawork22.jpg" alt=""></div>
    <div class="work-item"><img src="monawork23.jpg" alt=""></div>
    <div class="work-item"><img src="monawork24.jpg" alt=""></div>
    <div class="work-item"><img src="monawork25.jpg" alt=""></div>
    <div class="work-item"><img src="monawork26.jpg" alt=""></div>
    <div class="work-item"><img src="monawork27.jpg" alt=""></div>
    <div class="work-item"><img src="monawork28.jpg" alt=""></div>
    <div class="work-item"><img src="monawork29.jpg" alt=""></div>
    <div class="work-item"><img src="monawork30.jpg" alt=""></div>
    <div class="work-item"><img src="monawork31.jpg" alt=""></div>
    <div class="work-item"><img src="monawork32.jpg" alt=""></div>
    <div class="work-item"><img src="monawork33.jpg" alt=""></div>
    <div class="work-item"><img src="monawork34.jpg" alt=""></div>
    <div class="work-item"><iframe src="https://www.youtube.com/embed/PASTE_VIDEO_ID" allowfullscreen></iframe></div>
    -->

  </div>
</section>

<!-- ========== REVIEWS ========== -->
<section id="reviews" class="reveal">
  <h2>Reviews</h2>
  <div class="review-box">
    <div id="reviewList"></div>
    <div class="review-form">
      <input type="text" id="rname" placeholder="Name" autocomplete="off">
      <input type="text" id="rcode" placeholder="Access Code" autocomplete="off">
      <textarea id="rmessage" placeholder="Write your review..."></textarea>
      <button onclick="submitReview()">Submit</button>
    </div>
  </div>
</section>

<!-- Admin login — triggered by double-clicking the brand logo -->
<div class="modal-overlay" id="adminLogin">
  <div class="modal-box">
    <h3>Admin</h3>
    <input type="password" id="adminCode" placeholder="Key" onkeydown="if(event.key==='Enter')checkAdmin()">
    <button class="btn-primary" onclick="checkAdmin()">Enter</button>
    <button class="modal-close" onclick="document.getElementById('adminLogin').classList.remove('active')">Cancel</button>
  </div>
</div>

<!-- Admin panel -->
<div class="modal-overlay" id="adminPanel">
  <div class="modal-box" style="width:520px;max-width:92vw;max-height:78vh;overflow-y:auto">
    <h3>Review Manager</h3>
    <div id="adminReviewList"></div>
    <button class="modal-close" style="margin-top:16px" onclick="document.getElementById('adminPanel').classList.remove('active')">Close</button>
  </div>
</div>

<script>
// nav scroll effect
const nav = document.getElementById('nav');
window.addEventListener('scroll', () => {
  nav.classList.toggle('scrolled', window.scrollY > 40);
});

// scroll reveal
const revealObs = new IntersectionObserver(entries => {
  entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('active'); });
}, { threshold: .15 });
document.querySelectorAll('.reveal').forEach(el => revealObs.observe(el));

// lazy load images after DOM is ready
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('img').forEach(img => {
    img.classList.add('lazy-img');
    img.setAttribute('loading', 'lazy');
  });

  const imgObs = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if(e.isIntersecting){
        e.target.classList.add('loaded');
        imgObs.unobserve(e.target);
      }
    });
  }, { threshold: .1 });

  document.querySelectorAll('.lazy-img').forEach(img => imgObs.observe(img));
  document.querySelectorAll('iframe').forEach(f => f.setAttribute('loading', 'lazy'));
});

// supabase init
const { createClient } = supabase;
const db = createClient(
  "https://epqwjudyfpngixrtxyaa.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVwcXdqdWR5ZnBuZ2l4cnR4eWFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE1OTYwMDIsImV4cCI6MjA4NzE3MjAwMn0.SuN5vhlbDrp_Nk9gKOiHH_kxdeG5jVm6Goiibcn31Ig"
);

const ADMIN_KEY = "MONAFX_ADMIN_ULTRA_9x7K2pL_2026_PRIVATE";

// review access codes — hand these out one at a time in order
// MF-91XA → MF-7PQ2 → MF-3TZ8 → MF-8LK1 → MF-5RN4
const accessCodes = ["MF-91XA","MF-7PQ2","MF-3TZ8","MF-8LK1","MF-5RN4"];

// 10-minute cooldown between review submissions
const COOLDOWN_MS = 10 * 60 * 1000;
const RL_KEY = "monafx_last_review";

function canPost(){ const t=localStorage.getItem(RL_KEY); return !t||(Date.now()-parseInt(t))>=COOLDOWN_MS; }
function setCooldown(){ localStorage.setItem(RL_KEY, Date.now()); }
function minsLeft(){ const t=localStorage.getItem(RL_KEY); return t?Math.max(0,(COOLDOWN_MS-(Date.now()-parseInt(t)))/60000).toFixed(1):0; }

// basic XSS guard
function esc(s){ return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"); }

async function loadReviews(){
  const { data, error } = await db
    .from("monafx_reviews")
    .select("*")
    .order("created_at", { ascending: false });

  const box = document.getElementById("reviewList");
  box.innerHTML = "";

  if(error || !data || !data.length){
    box.innerHTML = '<p style="color:var(--muted);font-size:14px">No reviews yet.</p>';
    return;
  }

  data.forEach(r => {
    box.innerHTML += `
      <div class="review-item">
        <strong>${esc(r.name)}</strong>
        <p>${esc(r.message)}</p>
        ${r.reply ? `<div class="review-reply"><strong>Reply:</strong> ${esc(r.reply)}</div>` : ""}
      </div>`;
  });
}

async function submitReview(){
  if(!canPost()){ alert(`Wait ${minsLeft()} more minutes before posting again.`); return; }

  const name    = document.getElementById("rname").value.trim();
  const code    = document.getElementById("rcode").value.trim();
  const message = document.getElementById("rmessage").value.trim();

  if(!name || !message){ alert("Please fill in your name and review."); return; }
  if(!accessCodes.includes(code)){ alert("Invalid access code."); return; }

  const { error } = await db.from("monafx_reviews").insert([{ name, message, rating: 5 }]);
  if(error){ alert("Something went wrong, try again."); return; }

  setCooldown();
  document.getElementById("rname").value = "";
  document.getElementById("rcode").value = "";
  document.getElementById("rmessage").value = "";
  loadReviews();
}

// admin — double-click the brand name to open
function openAdminLogin(){
  document.getElementById("adminLogin").classList.add("active");
}

function checkAdmin(){
  if(document.getElementById("adminCode").value === ADMIN_KEY){
    document.getElementById("adminLogin").classList.remove("active");
    document.getElementById("adminCode").value = "";
    document.getElementById("adminPanel").classList.add("active");
    loadAdminReviews();
  } else {
    alert("Wrong key.");
  }
}

async function loadAdminReviews(){
  const { data } = await db
    .from("monafx_reviews")
    .select("*")
    .order("created_at", { ascending: false });

  const box = document.getElementById("adminReviewList");
  box.innerHTML = "";

  if(!data || !data.length){
    box.innerHTML = '<p style="color:var(--muted);font-size:13px">Nothing here yet.</p>';
    return;
  }

  data.forEach(r => {
    const el = document.createElement("div");
    el.className = "admin-entry";
    el.innerHTML = `
      <strong>${esc(r.name)}</strong>
      <p>${esc(r.message)}</p>
      ${r.reply ? `<p style="color:#818cf8;font-size:12px;margin-top:4px">↳ ${esc(r.reply)}</p>` : ""}
      <div class="abtns">
        <button class="btn-del" onclick="deleteReview('${r.id}')">Delete</button>
        <button class="btn-rep" onclick="replyReview('${r.id}')">Reply</button>
      </div>`;
    box.appendChild(el);
  });
}

async function deleteReview(id){
  await db.from("monafx_reviews").delete().eq("id", id);
  loadAdminReviews();
  loadReviews();
}

async function replyReview(id){
  const text = prompt("Write reply:");
  if(!text) return;
  await db.from("monafx_reviews").update({ reply: text }).eq("id", id);
  loadAdminReviews();
  loadReviews();
}

// close modals on backdrop click
document.querySelectorAll('.modal-overlay').forEach(m => {
  m.addEventListener('click', e => { if(e.target===m) m.classList.remove('active'); });
});

loadReviews();
</script>
</body>
</html>